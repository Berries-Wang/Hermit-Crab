<html>
<head>
  <title>18.使用minikube搭建单节点K8S集群</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/602326 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <meta name="content-class" content="yinxiang.markdown"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="5199"/>
<h1>18.使用minikube搭建单节点K8S集群</h1>

<div><span><div style="font-size: 14px; margin: 0; padding: 0; width: 100%;"><h1 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 41px; border-bottom: 3px double #999; color: #000; margin-top: 14px;">使用minikube搭建单节点K8S集群</h1>
<h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">背景</h2>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">  对于微服务，K8S是必须要掌握的。但是仅仅依赖于文档还不够，理论与实践相结合才是最完美的。</p>
<h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">实现方式</h2>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><img src="18.使用minikube搭建单节点K8S集群_files/Image.png" type="image/png" data-filename="Image.png"/></li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">如图：
<ol style="line-height: 160%; box-sizing: content-box; display: block; padding-left: 30px; margin: 6px 0 10px; color: #333; list-style-type: decimal; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">minikube安装的K8S集群是以VirtualBox为依托，使用Virtual Box安装一个虚拟机vmA，将K8S安装在虚拟机vmA里面。<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">因此，在访问K8S应用的时候应该使用vmA(使用minikube ip获取)的IP来访问</strong>。</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">用户在命令行通过Kubectl和Minikube来操作K8S集群。</li>
</ol>
</li>
</ul>
<h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">前置条件</h2>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">  本次搭建主要是在Vmware下的Centos7.8虚拟机上搭建的。因此前置条件有:</p>
<ol style="line-height: 160%; box-sizing: content-box; display: block; padding-left: 30px; margin: 6px 0 10px; color: #333; list-style-type: decimal;">
<li style="line-height: 160%; box-sizing: content-box;">下载并安装[VMware-workstation-full-14.0.0-6661328.exe],安装包或者密钥生成器可以找@汪维</li>
<li style="line-height: 160%; box-sizing: content-box;">下载Centos7.8(CentOS Linux release 7.8.2003 (Core))的镜像，并创建虚拟机。这里虚拟机的创建不做讲解。若想跳过该步骤，可以找@汪维。虚拟机具体的配置：
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">2CPU</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">4G内存</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">20G硬盘</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">启动虚拟机下的CPU虚拟化(选中虚拟化Intel VT-x/EPT 或AMD-V/RVI(V))，如下图
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><img src="18.使用minikube搭建单节点K8S集群_files/Image [1].png" type="image/png" data-filename="Image.png"/></li>
</ul>
</li>
</ul>
</li>
<li style="line-height: 160%; box-sizing: content-box;">给虚拟机配置固定IP.按照如下截图进行修改，修改完成之后，使用<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">systemctl restart network</strong>重新启动网络
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">其中，ip以及网关的设置需要根据本地虚拟机网络来配置</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><img src="18.使用minikube搭建单节点K8S集群_files/Image [2].png" type="image/png" data-filename="Image.png"/></li>
</ul>
</li>
<li style="line-height: 160%; box-sizing: content-box;">使用yum update更新软件包</li>
<li style="line-height: 160%; box-sizing: content-box;">安装vim</li>
</ol>
<h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">安装步骤</h2>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">Step1.虚拟机安装VirtualBox-5.1</h3>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">001.新增文件virtualbox.repo</h5>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">
<p style="line-height: 160%; box-sizing: content-box; color: #333; margin: 0;">在/etc/yum.repos.d目录下新建virtualbox.repo文件，并写入如下内容</p>
<p style="line-height: 160%; box-sizing: content-box; color: #333; margin: 0;">[virtualbox]<br/>
name=Oracle Linux / RHEL / CentOS-$releasever / <span style="font: normal 1.21em KaTeX_Main,Times New Roman,serif; white-space: nowrap; text-indent: 0; text-rendering: auto; line-height: 160%; box-sizing: content-box;"><span style="line-height: 160%; box-sizing: content-box; clip: rect(1px,1px,1px,1px); padding: 0; border: 0; overflow: hidden; position: fixed; -ms-high-contrast-adjust: none;"></span><span style="line-height: 160%; box-sizing: content-box; display: inline-block; -ms-high-contrast-adjust: none;"><span style="line-height: 160%; box-sizing: content-box; display: inline-block; height: 0.75em; -ms-high-contrast-adjust: none;"></span><span style="line-height: 160%; box-sizing: content-box; display: inline-block; height: 1em; vertical-align: -0.25em; -ms-high-contrast-adjust: none;"></span><span style="line-height: 160%; box-sizing: content-box; position: relative; display: inline-block; -ms-high-contrast-adjust: none;"><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; -ms-high-contrast-adjust: none;">b</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; -ms-high-contrast-adjust: none;">a</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; -ms-high-contrast-adjust: none;">s</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; -ms-high-contrast-adjust: none;">e</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; -ms-high-contrast-adjust: none;">a</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; margin-right: 0.02778em; -ms-high-contrast-adjust: none;">r</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; -ms-high-contrast-adjust: none;">c</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; -ms-high-contrast-adjust: none;">h</span><span style="line-height: 160%; box-sizing: content-box; display: inline-block; border: 0 solid; position: relative; margin-right: 0.2222222222222222em; -ms-high-contrast-adjust: none;"></span><span style="line-height: 160%; box-sizing: content-box; -ms-high-contrast-adjust: none;">−</span><span style="line-height: 160%; box-sizing: content-box; display: inline-block; border: 0 solid; position: relative; margin-right: 0.2222222222222222em; -ms-high-contrast-adjust: none;"></span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; margin-right: 0.22222em; -ms-high-contrast-adjust: none;">V</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; -ms-high-contrast-adjust: none;">i</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; margin-right: 0.02778em; -ms-high-contrast-adjust: none;">r</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; -ms-high-contrast-adjust: none;">t</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; -ms-high-contrast-adjust: none;">u</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; -ms-high-contrast-adjust: none;">a</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; margin-right: 0.01968em; -ms-high-contrast-adjust: none;">l</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; margin-right: 0.05017em; -ms-high-contrast-adjust: none;">B</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; -ms-high-contrast-adjust: none;">o</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; -ms-high-contrast-adjust: none;">x</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; -ms-high-contrast-adjust: none;">b</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; -ms-high-contrast-adjust: none;">a</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; -ms-high-contrast-adjust: none;">s</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; -ms-high-contrast-adjust: none;">e</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; -ms-high-contrast-adjust: none;">u</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; margin-right: 0.02778em; -ms-high-contrast-adjust: none;">r</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; margin-right: 0.01968em; -ms-high-contrast-adjust: none;">l</span><span style="line-height: 160%; box-sizing: content-box; display: inline-block; border: 0 solid; position: relative; margin-right: 0.2777777777777778em; -ms-high-contrast-adjust: none;"></span><span style="line-height: 160%; box-sizing: content-box; -ms-high-contrast-adjust: none;">=</span><span style="line-height: 160%; box-sizing: content-box; display: inline-block; border: 0 solid; position: relative; margin-right: 0.2777777777777778em; -ms-high-contrast-adjust: none;"></span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; -ms-high-contrast-adjust: none;">h</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; -ms-high-contrast-adjust: none;">t</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; -ms-high-contrast-adjust: none;">t</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; -ms-high-contrast-adjust: none;">p</span><span style="line-height: 160%; box-sizing: content-box; display: inline-block; border: 0 solid; position: relative; margin-right: 0.2777777777777778em; -ms-high-contrast-adjust: none;"></span><span style="line-height: 160%; box-sizing: content-box; -ms-high-contrast-adjust: none;">:</span><span style="line-height: 160%; box-sizing: content-box; display: inline-block; border: 0 solid; position: relative; margin-right: 0.2777777777777778em; -ms-high-contrast-adjust: none;"></span><span style="line-height: 160%; box-sizing: content-box; -ms-high-contrast-adjust: none;">/</span><span style="line-height: 160%; box-sizing: content-box; -ms-high-contrast-adjust: none;">/</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; -ms-high-contrast-adjust: none;">d</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; -ms-high-contrast-adjust: none;">o</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; margin-right: 0.02691em; -ms-high-contrast-adjust: none;">w</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; -ms-high-contrast-adjust: none;">n</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; margin-right: 0.01968em; -ms-high-contrast-adjust: none;">l</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; -ms-high-contrast-adjust: none;">o</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; -ms-high-contrast-adjust: none;">a</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; -ms-high-contrast-adjust: none;">d</span><span style="line-height: 160%; box-sizing: content-box; -ms-high-contrast-adjust: none;">.</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; margin-right: 0.03588em; -ms-high-contrast-adjust: none;">v</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; -ms-high-contrast-adjust: none;">i</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; margin-right: 0.02778em; -ms-high-contrast-adjust: none;">r</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; -ms-high-contrast-adjust: none;">t</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; -ms-high-contrast-adjust: none;">u</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; -ms-high-contrast-adjust: none;">a</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; margin-right: 0.01968em; -ms-high-contrast-adjust: none;">l</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; -ms-high-contrast-adjust: none;">b</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; -ms-high-contrast-adjust: none;">o</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; -ms-high-contrast-adjust: none;">x</span><span style="line-height: 160%; box-sizing: content-box; -ms-high-contrast-adjust: none;">.</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; -ms-high-contrast-adjust: none;">o</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; margin-right: 0.02778em; -ms-high-contrast-adjust: none;">r</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; margin-right: 0.03588em; -ms-high-contrast-adjust: none;">g</span><span style="line-height: 160%; box-sizing: content-box; -ms-high-contrast-adjust: none;">/</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; margin-right: 0.03588em; -ms-high-contrast-adjust: none;">v</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; -ms-high-contrast-adjust: none;">i</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; margin-right: 0.02778em; -ms-high-contrast-adjust: none;">r</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; -ms-high-contrast-adjust: none;">t</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; -ms-high-contrast-adjust: none;">u</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; -ms-high-contrast-adjust: none;">a</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; margin-right: 0.01968em; -ms-high-contrast-adjust: none;">l</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; -ms-high-contrast-adjust: none;">b</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; -ms-high-contrast-adjust: none;">o</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; -ms-high-contrast-adjust: none;">x</span><span style="line-height: 160%; box-sizing: content-box; -ms-high-contrast-adjust: none;">/</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; margin-right: 0.02778em; -ms-high-contrast-adjust: none;">r</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; -ms-high-contrast-adjust: none;">p</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; -ms-high-contrast-adjust: none;">m</span><span style="line-height: 160%; box-sizing: content-box; -ms-high-contrast-adjust: none;">/</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; -ms-high-contrast-adjust: none;">e</span><span style="line-height: 160%; box-sizing: content-box; font-family: KaTeX_Math; font-style: italic; margin-right: 0.01968em; -ms-high-contrast-adjust: none;">l</span><span style="line-height: 160%; box-sizing: content-box; -ms-high-contrast-adjust: none;">/</span></span></span></span>releasever/$basearch<br/>
enabled=1<br/>
gpgcheck=1<br/>
repo_gpgcheck=1<br/>
gpgkey=https://www.virtualbox.org/download/oracle_vbox.asc</p>
</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">
<p style="line-height: 160%; box-sizing: content-box; color: #333; margin: 0;">如下图</p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><img src="18.使用minikube搭建单节点K8S集群_files/Image [3].png" type="image/png" data-filename="Image.png"/></li>
</ul>
</li>
</ul>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">002. 更新yum缓存</h5>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">先执行: yum clean all</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">再执行: yum makecache</li>
</ul>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">003. 安装virtualbox</h5>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">执行命令: yum install VirtualBox-5.1</li>
</ul>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">004. 配置VirtualBox</h5>
<ol style="line-height: 160%; box-sizing: content-box; display: block; padding-left: 30px; margin: 6px 0 10px; color: #333; list-style-type: decimal;">
<li style="line-height: 160%; box-sizing: content-box;">执行命令: sudo /sbin/vboxconfig</li>
<li style="line-height: 160%; box-sizing: content-box;">按照提示安装对应软件包
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><img src="18.使用minikube搭建单节点K8S集群_files/Image [4].png" type="image/png" data-filename="Image.png"/></li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">因此，按照提示，需要依次执行命令:
<ol style="line-height: 160%; box-sizing: content-box; display: block; padding-left: 30px; margin: 6px 0 10px; color: #333; list-style-type: decimal; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">yum install gcc make</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">yum install kernel-devel-3.10.0-957.el7.x86_64</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">yum install kernel-devel</li>
</ol>
</li>
</ul>
</li>
<li style="line-height: 160%; box-sizing: content-box;">第二步执行完成之后，再次执行sudo /sbin/vboxconfig命令，检测依赖是否安装成功</li>
</ol>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">005.重启虚拟机</h5>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">执行命令: reboot</li>
</ul>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">Step2.虚拟机安装Docker</h3>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">001.安装Docker</h5>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">yum remove docker-latest-logrotate docker-logrotate docker-selinux dockdocker-engine</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">yum install -y yum-utils   device-mapper-persistent-data   lvm2</li>
</ul>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">002.使用阿里云安装源</h5>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">rpm --import http://mirrors.aliyun.com/docker-ce/linux/centos/gpg</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">yum makecache fast</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">yum -y install docker-ce</li>
</ul>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">003.完成安装并启动Docker</h5>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">systemctl start docker &amp;&amp; systemctl status docker &amp;&amp; systemctl enable docker</li>
</ul>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">004. 新建用户组，新建用户，并将用户添加到用户组中</h5>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">新建用户组：groupadd docker</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">新建用户: useradd wei</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">给新用户设置密码: passwd wei</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">将新用户添加到docker用户组中: usermod -aG docker wei</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">重启docker服务: systemctl restart docker</li>
</ul>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">05.给新建用户赋予root权限</h5>
<ol style="line-height: 160%; box-sizing: content-box; display: block; padding-left: 30px; margin: 6px 0 10px; color: #333; list-style-type: decimal;">
<li style="line-height: 160%; box-sizing: content-box;">修改文件/etc/sudoers,如下
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><img src="18.使用minikube搭建单节点K8S集群_files/Image [5].png" type="image/png" data-filename="Image.png"/></li>
</ul>
</li>
</ol>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">06.切换用户，之后操作在新建的用户下执行</h5>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">使用命令 su - wei 来切换用户</li>
</ul>
<h6 style="line-height: 160%; box-sizing: content-box; font-size: 13px; color: #333;">07. 配置dockers镜像源</h6>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">修改文件 /etc/docker/daemon.json<br/>
{<br/>
&quot;registry-mirrors&quot;: [&quot;https://17o3zxc0.mirror.aliyuncs.com&quot;]<br/>
}</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">修改之后，需要重启Docker<br/>
systemctl restart docker</p>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">Step3.虚拟机安装Kubectl</h3>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">001. 下载kubectl</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">请注意版本号,例如 Linux 64位，则应该选择linux-amd64版本的</p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">使用命令: wget https://dl.k8s.io/v1.18.9/kubernetes-client-linux-amd64.tar.gz
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><img src="18.使用minikube搭建单节点K8S集群_files/Image [6].png" type="image/png" data-filename="Image.png"/></li>
</ul>
</li>
</ul>
<h6 style="line-height: 160%; box-sizing: content-box; font-size: 13px; color: #333;">02. 解压缩，放入/usr/local/bin目录中</h6>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><img src="18.使用minikube搭建单节点K8S集群_files/Image [7].png" type="image/png" data-filename="Image.png"/></li>
</ul>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">Step4.虚拟机安装minikube</h3>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">01. 下载minikube</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">同kubectl，需要注意版本号</p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">点击进入下载页面<a href="https://github.com/kubernetes/minikube/releases/tag/v1.12.3" style="line-height: 160%; box-sizing: content-box; text-decoration: underline; color: #5286bc;">https://github.com/kubernetes/minikube/releases/tag/v1.12.3</a></li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">使用命令: wget  https://github.com/kubernetes/minikube/releases/download/v1.12.3/minikube-linux-amd64
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><img src="18.使用minikube搭建单节点K8S集群_files/Image [8].png" type="image/png" data-filename="Image.png"/></li>
</ul>
</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">请注意，这里下载的是v1.12.3版本的minikube，对应的K8S版本是v1.18.3</li>
</ul>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">02. 重命名</h5>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">mv minikube-linux-amd64 minikube</li>
</ul>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">03. 赋予可执行权限</h5>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">sudo chmod a+x minikube</li>
</ul>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">04. 放入到/usr/local/bin目录中</h5>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">sudo cp minikube /usr/local/bin/</li>
</ul>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">Step5.虚拟机启动K8S</h3>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">001.使用如下命令创建K8S集群</h5>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">minikube start --vm-driver=virtualbox --registry-mirror=https://17o3zxc0.mirror.aliyuncs.com
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">--vm-driver:指定驱动，这里使用Virtual Box来实现</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">--registry-mirror docker registry 的镜像源，集群安装后拉取镜像加速用，可以使用其它加速器地址</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><img src="18.使用minikube搭建单节点K8S集群_files/Image [9].png" type="image/png" data-filename="Image.png"/></li>
</ul>
</li>
</ul>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">002. 判断是否创建成功</h5>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">使用命令: minikube status
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><img src="18.使用minikube搭建单节点K8S集群_files/Image [10].png" type="image/png" data-filename="Image.png"/></li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">如图，即创建成功</li>
</ul>
</li>
</ul>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">Step6.使用K8S集群</h3>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">001. 创建nginx-deployment.yml文件。</h5>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">内容如下<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">apiVersion:</span> <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">apps/v1</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">kind:</span> <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">Deployment</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">metadata:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">  name:</span> <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">nginx-deployment</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">spec:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">  replicas:</span> <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">  selector:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">    matchLabels:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">      app:</span> <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">nginx</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">  template:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">    metadata:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">      labels:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">        app:</span> <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">nginx</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">    spec:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">      containers:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">      - name:</span> <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">nginx</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">        image:</span> <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">nginx</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">        ports:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">        - containerPort:</span> <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">80</span>
</code></pre>
</li>
</ul>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">002. 创建nginx-service.yml文件。</h5>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">内容如下<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">kind:</span> <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">Service</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">apiVersion:</span> <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">v1</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">metadata:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">  name:</span> <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">nginx-service</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">spec:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">  selector:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">    app:</span> <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">nginx</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">  ports:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">    - port:</span> <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">80</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">      targetPort:</span> <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">80</span>
</code></pre>
</li>
</ul>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">003. 创建nginx-ingress.yml文件。</h5>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">内容如下<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">apiVersion:</span> <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">extensions/v1beta1</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">kind:</span> <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">Ingress</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">metadata:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">  name:</span> <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">nginx-ingress</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">  annotations:</span>
    <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">kubernetes.io/ingress.class:</span> <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;nginx&quot;</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">spec:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">  rules:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">  - host:</span> <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">nginx.bosswang.link</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">    http:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">      paths:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">      - path:</span> <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">/</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">        backend:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">          serviceName:</span> <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">nginx-service</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">          servicePort:</span> <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">80</span>
</code></pre>
</li>
</ul>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">004. 应用yml文件，创建pod，service，ingress</h5>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">使用命令:kubectl create -f nginx-xxx.yml
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><img src="18.使用minikube搭建单节点K8S集群_files/Image [11].png" type="image/png" data-filename="Image.png"/></li>
</ul>
</li>
</ul>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">005. minikube 启动ingress</h5>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">使用命令：minikube addons enable ingress
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><img src="18.使用minikube搭建单节点K8S集群_files/Image [12].png" type="image/png" data-filename="Image.png"/></li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">若命令执行失败，先执行minikube dashboard命令</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">成功效果如下：
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><img src="18.使用minikube搭建单节点K8S集群_files/Image [13].png" type="image/png" data-filename="Image.png"/></li>
</ul>
</li>
</ul>
</li>
</ul>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">006. 本地配置DNS，创建虚拟域名</h5>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">修改/etc/hosts文件，添加如下内容
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><img src="18.使用minikube搭建单节点K8S集群_files/Image [14].png" type="image/png" data-filename="Image.png"/></li>
</ul>
</li>
</ul>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">007. 访问</h5>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">目前在该K8S集群中创建的Pod，Service，Ingress，因此可以通过外网访问到集群内部(通过Ingress，当然也可以直接使用NodePort形式访问服务)的服务。如下
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">使用命令： curl http://nginx.bosswang.link,输入如下:
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><img src="18.使用minikube搭建单节点K8S集群_files/Image [15].png" type="image/png" data-filename="Image.png"/></li>
</ul>
</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">测试一下：修改nginx的index页面
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><img src="18.使用minikube搭建单节点K8S集群_files/Image [16].png" type="image/png" data-filename="Image.png"/></li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">再次访问：<img src="18.使用minikube搭建单节点K8S集群_files/Image [17].png" type="image/png" data-filename="Image.png"/></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">总结</h2>
<ol style="line-height: 160%; box-sizing: content-box; display: block; padding-left: 30px; margin: 6px 0 10px; color: #333; list-style-type: decimal;">
<li style="line-height: 160%; box-sizing: content-box;">该文档仅仅是体现如何搭建一个单节点的K8S集群，更多更深入的，更有趣的需要你来探索。</li>
</ol>
</div><center style="display:none !important;visibility:collapse !important;height:0 !important;white-space:nowrap;width:100%;overflow:hidden">%23%20%E4%BD%BF%E7%94%A8minikube%E6%90%AD%E5%BB%BA%E5%8D%95%E8%8A%82%E7%82%B9K8S%E9%9B%86%E7%BE%A4%0A%23%23%20%E8%83%8C%E6%99%AF%0A%26nbsp%3B%26nbsp%3B%E5%AF%B9%E4%BA%8E%E5%BE%AE%E6%9C%8D%E5%8A%A1%EF%BC%8CK8S%E6%98%AF%E5%BF%85%E9%A1%BB%E8%A6%81%E6%8E%8C%E6%8F%A1%E7%9A%84%E3%80%82%E4%BD%86%E6%98%AF%E4%BB%85%E4%BB%85%E4%BE%9D%E8%B5%96%E4%BA%8E%E6%96%87%E6%A1%A3%E8%BF%98%E4%B8%8D%E5%A4%9F%EF%BC%8C%E7%90%86%E8%AE%BA%E4%B8%8E%E5%AE%9E%E8%B7%B5%E7%9B%B8%E7%BB%93%E5%90%88%E6%89%8D%E6%98%AF%E6%9C%80%E5%AE%8C%E7%BE%8E%E7%9A%84%E3%80%82%0A%23%23%20%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F%0A%2B%20!%5Bdd8fb37fde59cea7e32540170def39c4.png%5D(en-resource%3A%2F%2Fdatabase%2F5201%3A1)%0A%2B%20%E5%A6%82%E5%9B%BE%EF%BC%9A%0A%20%20%20%20%201.%20minikube%E5%AE%89%E8%A3%85%E7%9A%84K8S%E9%9B%86%E7%BE%A4%E6%98%AF%E4%BB%A5VirtualBox%E4%B8%BA%E4%BE%9D%E6%89%98%EF%BC%8C%E4%BD%BF%E7%94%A8Virtual%20Box%E5%AE%89%E8%A3%85%E4%B8%80%E4%B8%AA%E8%99%9A%E6%8B%9F%E6%9C%BAvmA%EF%BC%8C%E5%B0%86K8S%E5%AE%89%E8%A3%85%E5%9C%A8%E8%99%9A%E6%8B%9F%E6%9C%BAvmA%E9%87%8C%E9%9D%A2%E3%80%82**%E5%9B%A0%E6%AD%A4%EF%BC%8C%E5%9C%A8%E8%AE%BF%E9%97%AEK8S%E5%BA%94%E7%94%A8%E7%9A%84%E6%97%B6%E5%80%99%E5%BA%94%E8%AF%A5%E4%BD%BF%E7%94%A8vmA(%E4%BD%BF%E7%94%A8minikube%20ip%E8%8E%B7%E5%8F%96)%E7%9A%84IP%E6%9D%A5%E8%AE%BF%E9%97%AE**%E3%80%82%0A%20%20%20%20%202.%20%E7%94%A8%E6%88%B7%E5%9C%A8%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%80%9A%E8%BF%87Kubectl%E5%92%8CMinikube%E6%9D%A5%E6%93%8D%E4%BD%9CK8S%E9%9B%86%E7%BE%A4%E3%80%82%0A%23%23%20%E5%89%8D%E7%BD%AE%E6%9D%A1%E4%BB%B6%0A%26nbsp%3B%26nbsp%3B%E6%9C%AC%E6%AC%A1%E6%90%AD%E5%BB%BA%E4%B8%BB%E8%A6%81%E6%98%AF%E5%9C%A8Vmware%E4%B8%8B%E7%9A%84Centos7.8%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%B8%8A%E6%90%AD%E5%BB%BA%E7%9A%84%E3%80%82%E5%9B%A0%E6%AD%A4%E5%89%8D%E7%BD%AE%E6%9D%A1%E4%BB%B6%E6%9C%89%3A%0A%20%201.%20%E4%B8%8B%E8%BD%BD%E5%B9%B6%E5%AE%89%E8%A3%85%5BVMware-workstation-full-14.0.0-6661328.exe%5D%2C%E5%AE%89%E8%A3%85%E5%8C%85%E6%88%96%E8%80%85%E5%AF%86%E9%92%A5%E7%94%9F%E6%88%90%E5%99%A8%E5%8F%AF%E4%BB%A5%E6%89%BE%40%E6%B1%AA%E7%BB%B4%0A%20%202.%20%E4%B8%8B%E8%BD%BDCentos7.8(CentOS%20Linux%20release%207.8.2003%20(Core))%E7%9A%84%E9%95%9C%E5%83%8F%EF%BC%8C%E5%B9%B6%E5%88%9B%E5%BB%BA%E8%99%9A%E6%8B%9F%E6%9C%BA%E3%80%82%E8%BF%99%E9%87%8C%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%9A%84%E5%88%9B%E5%BB%BA%E4%B8%8D%E5%81%9A%E8%AE%B2%E8%A7%A3%E3%80%82%E8%8B%A5%E6%83%B3%E8%B7%B3%E8%BF%87%E8%AF%A5%E6%AD%A5%E9%AA%A4%EF%BC%8C%E5%8F%AF%E4%BB%A5%E6%89%BE%40%E6%B1%AA%E7%BB%B4%E3%80%82%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%85%B7%E4%BD%93%E7%9A%84%E9%85%8D%E7%BD%AE%EF%BC%9A%0A%20%20%20%20%20%20%2B%202CPU%0A%20%20%20%20%20%20%2B%204G%E5%86%85%E5%AD%98%0A%20%20%20%20%20%20%2B%2020G%E7%A1%AC%E7%9B%98%0A%20%20%20%20%20%20%2B%20%E5%90%AF%E5%8A%A8%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%B8%8B%E7%9A%84CPU%E8%99%9A%E6%8B%9F%E5%8C%96(%E9%80%89%E4%B8%AD%E8%99%9A%E6%8B%9F%E5%8C%96Intel%20VT-x%2FEPT%20%E6%88%96AMD-V%2FRVI(V))%EF%BC%8C%E5%A6%82%E4%B8%8B%E5%9B%BE%0A%20%20%20%20%20%20%20%20%20%20%20-%20!%5Bab35119b4b71b70187b6e78f73fdd210.png%5D(en-resource%3A%2F%2Fdatabase%2F5203%3A1)%20%20%20%0A%203.%20%E7%BB%99%E8%99%9A%E6%8B%9F%E6%9C%BA%E9%85%8D%E7%BD%AE%E5%9B%BA%E5%AE%9AIP.%E6%8C%89%E7%85%A7%E5%A6%82%E4%B8%8B%E6%88%AA%E5%9B%BE%E8%BF%9B%E8%A1%8C%E4%BF%AE%E6%94%B9%EF%BC%8C%E4%BF%AE%E6%94%B9%E5%AE%8C%E6%88%90%E4%B9%8B%E5%90%8E%EF%BC%8C%E4%BD%BF%E7%94%A8**systemctl%20restart%20network**%E9%87%8D%E6%96%B0%E5%90%AF%E5%8A%A8%E7%BD%91%E7%BB%9C%0A%20%20%20%20%20%20%2B%20%E5%85%B6%E4%B8%AD%EF%BC%8Cip%E4%BB%A5%E5%8F%8A%E7%BD%91%E5%85%B3%E7%9A%84%E8%AE%BE%E7%BD%AE%E9%9C%80%E8%A6%81%E6%A0%B9%E6%8D%AE%E6%9C%AC%E5%9C%B0%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%9D%A5%E9%85%8D%E7%BD%AE%0A%20%20%20%20%20%20%2B%20!%5B5be96883b2c7f6c427cfff16552b9ad8.png%5D(en-resource%3A%2F%2Fdatabase%2F5207%3A1)%0A%204.%20%E4%BD%BF%E7%94%A8yum%20update%E6%9B%B4%E6%96%B0%E8%BD%AF%E4%BB%B6%E5%8C%85%0A%205.%20%E5%AE%89%E8%A3%85vim%0A%23%23%20%E5%AE%89%E8%A3%85%E6%AD%A5%E9%AA%A4%0A%23%23%23%20Step1.%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85VirtualBox-5.1%0A%23%23%23%23%23%20001.%E6%96%B0%E5%A2%9E%E6%96%87%E4%BB%B6virtualbox.repo%0A%2B%20%E5%9C%A8%2Fetc%2Fyum.repos.d%E7%9B%AE%E5%BD%95%E4%B8%8B%E6%96%B0%E5%BB%BAvirtualbox.repo%E6%96%87%E4%BB%B6%EF%BC%8C%E5%B9%B6%E5%86%99%E5%85%A5%E5%A6%82%E4%B8%8B%E5%86%85%E5%AE%B9%0A%20%20%20%20%20%0A%20%20%20%20%5Bvirtualbox%5D%0A%20%20%20%20name%3DOracle%20Linux%20%2F%20RHEL%20%2F%20CentOS-%24releasever%20%2F%20%24basearch%20-%20VirtualBox%0A%20%20%20%20baseurl%3Dhttp%3A%2F%2Fdownload.virtualbox.org%2Fvirtualbox%2Frpm%2Fel%2F%24releasever%2F%24basearch%0A%20%20%20%20enabled%3D1%0A%20%20%20%20gpgcheck%3D1%0A%20%20%20%20repo_gpgcheck%3D1%0A%20%20%20%20gpgkey%3Dhttps%3A%2F%2Fwww.virtualbox.org%2Fdownload%2Foracle_vbox.asc%0A%20%0A%2B%20%E5%A6%82%E4%B8%8B%E5%9B%BE%0A%20%20%20%20-%20!%5Bfabe24b11136f6d6ef7050e7b39ac1cd.png%5D(en-resource%3A%2F%2Fdatabase%2F5215%3A1)%0A%0A%23%23%23%23%23%20002.%20%E6%9B%B4%E6%96%B0yum%E7%BC%93%E5%AD%98%0A%2B%20%E5%85%88%E6%89%A7%E8%A1%8C%3A%20yum%20clean%20all%0A%2B%20%E5%86%8D%E6%89%A7%E8%A1%8C%3A%20yum%20makecache%0A%23%23%23%23%23%20003.%20%E5%AE%89%E8%A3%85virtualbox%0A%2B%20%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4%3A%20yum%20install%20VirtualBox-5.1%0A%23%23%23%23%23%20004.%20%E9%85%8D%E7%BD%AEVirtualBox%0A1.%20%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4%3A%20sudo%20%2Fsbin%2Fvboxconfig%0A2.%20%E6%8C%89%E7%85%A7%E6%8F%90%E7%A4%BA%E5%AE%89%E8%A3%85%E5%AF%B9%E5%BA%94%E8%BD%AF%E4%BB%B6%E5%8C%85%0A%20%20%20%20-%20!%5Bb873b510ad7ad4a29c3cb75b99019cf5.png%5D(en-resource%3A%2F%2Fdatabase%2F5217%3A1)%0A%20%20%20%20-%20%E5%9B%A0%E6%AD%A4%EF%BC%8C%E6%8C%89%E7%85%A7%E6%8F%90%E7%A4%BA%EF%BC%8C%E9%9C%80%E8%A6%81%E4%BE%9D%E6%AC%A1%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4%3A%20%0A%20%20%20%20%20%20%20%20%201.%20yum%20install%20gcc%20make%20%20%0A%20%20%20%20%20%20%20%20%202.%20%20yum%20install%20kernel-devel-3.10.0-957.el7.x86_64%20%20%0A%20%20%20%20%20%20%20%20%203.%20%20yum%20install%20kernel-devel%0A3.%20%E7%AC%AC%E4%BA%8C%E6%AD%A5%E6%89%A7%E8%A1%8C%E5%AE%8C%E6%88%90%E4%B9%8B%E5%90%8E%EF%BC%8C%E5%86%8D%E6%AC%A1%E6%89%A7%E8%A1%8Csudo%20%2Fsbin%2Fvboxconfig%E5%91%BD%E4%BB%A4%EF%BC%8C%E6%A3%80%E6%B5%8B%E4%BE%9D%E8%B5%96%E6%98%AF%E5%90%A6%E5%AE%89%E8%A3%85%E6%88%90%E5%8A%9F%0A%23%23%23%23%23%20005.%E9%87%8D%E5%90%AF%E8%99%9A%E6%8B%9F%E6%9C%BA%0A%2B%20%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4%3A%20reboot%0A%23%23%23%20Step2.%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85Docker%0A%23%23%23%23%23%20001.%E5%AE%89%E8%A3%85Docker%0A-%20yum%20remove%20docker-latest-logrotate%20docker-logrotate%20docker-selinux%20dockdocker-engine%0A-%20yum%20install%20-y%20yum-utils%20%C2%A0%20device-mapper-persistent-data%20%C2%A0%20lvm2%0A%23%23%23%23%23%20002.%E4%BD%BF%E7%94%A8%E9%98%BF%E9%87%8C%E4%BA%91%E5%AE%89%E8%A3%85%E6%BA%90%0A-%20yum-config-manager%20--add-repo%20http%3A%2F%2Fmirrors.aliyun.com%2Fdocker-ce%2Flinux%2Fcentos%2Fdocker-ce.repo%C2%A0%0A-%20rpm%20--import%20http%3A%2F%2Fmirrors.aliyun.com%2Fdocker-ce%2Flinux%2Fcentos%2Fgpg%0A-%20yum%20makecache%20fast%C2%A0%20%C2%A0%20%0A-%20yum%20-y%20install%20docker-ce%0A%23%23%23%23%23%20003.%E5%AE%8C%E6%88%90%E5%AE%89%E8%A3%85%E5%B9%B6%E5%90%AF%E5%8A%A8Docker%0A%20%20%20-%20systemctl%20start%20docker%20%26%26%20systemctl%20status%20docker%20%26%26%20systemctl%20enable%20docker%0A%23%23%23%23%23%20004.%20%E6%96%B0%E5%BB%BA%E7%94%A8%E6%88%B7%E7%BB%84%EF%BC%8C%E6%96%B0%E5%BB%BA%E7%94%A8%E6%88%B7%EF%BC%8C%E5%B9%B6%E5%B0%86%E7%94%A8%E6%88%B7%E6%B7%BB%E5%8A%A0%E5%88%B0%E7%94%A8%E6%88%B7%E7%BB%84%E4%B8%AD%0A-%20%E6%96%B0%E5%BB%BA%E7%94%A8%E6%88%B7%E7%BB%84%EF%BC%9Agroupadd%20docker%0A-%20%E6%96%B0%E5%BB%BA%E7%94%A8%E6%88%B7%3A%20useradd%20wei%0A-%20%E7%BB%99%E6%96%B0%E7%94%A8%E6%88%B7%E8%AE%BE%E7%BD%AE%E5%AF%86%E7%A0%81%3A%20passwd%20wei%0A-%20%E5%B0%86%E6%96%B0%E7%94%A8%E6%88%B7%E6%B7%BB%E5%8A%A0%E5%88%B0docker%E7%94%A8%E6%88%B7%E7%BB%84%E4%B8%AD%3A%20usermod%20-aG%20docker%20wei%0A-%20%E9%87%8D%E5%90%AFdocker%E6%9C%8D%E5%8A%A1%3A%20systemctl%20restart%20docker%0A%23%23%23%23%23%2005.%E7%BB%99%E6%96%B0%E5%BB%BA%E7%94%A8%E6%88%B7%E8%B5%8B%E4%BA%88root%E6%9D%83%E9%99%90%0A1.%20%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%2Fetc%2Fsudoers%2C%E5%A6%82%E4%B8%8B%0A%20%20%20%20%20-%20!%5B46ddc35235464237c3d7877edcf819f7.png%5D(en-resource%3A%2F%2Fdatabase%2F5219%3A1)%0A%23%23%23%23%23%2006.%E5%88%87%E6%8D%A2%E7%94%A8%E6%88%B7%EF%BC%8C%E4%B9%8B%E5%90%8E%E6%93%8D%E4%BD%9C%E5%9C%A8%E6%96%B0%E5%BB%BA%E7%9A%84%E7%94%A8%E6%88%B7%E4%B8%8B%E6%89%A7%E8%A1%8C%0A%2B%20%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%20su%20-%20wei%20%E6%9D%A5%E5%88%87%E6%8D%A2%E7%94%A8%E6%88%B7%0A%23%23%23%23%23%23%2007.%20%E9%85%8D%E7%BD%AEdockers%E9%95%9C%E5%83%8F%E6%BA%90%0A%0A%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%20%2Fetc%2Fdocker%2Fdaemon.json%0A%7B%0A%22registry-mirrors%22%3A%20%5B%22https%3A%2F%2F17o3zxc0.mirror.aliyuncs.com%22%5D%0A%7D%0A%0A%E4%BF%AE%E6%94%B9%E4%B9%8B%E5%90%8E%EF%BC%8C%E9%9C%80%E8%A6%81%E9%87%8D%E5%90%AFDocker%0Asystemctl%20restart%20docker%0A%0A%23%23%23%20Step3.%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85Kubectl%0A%23%23%23%23%23%20001.%20%E4%B8%8B%E8%BD%BDkubectl%0A%E8%AF%B7%E6%B3%A8%E6%84%8F%E7%89%88%E6%9C%AC%E5%8F%B7%2C%E4%BE%8B%E5%A6%82%20Linux%2064%E4%BD%8D%EF%BC%8C%E5%88%99%E5%BA%94%E8%AF%A5%E9%80%89%E6%8B%A9linux-amd64%E7%89%88%E6%9C%AC%E7%9A%84%0A%2B%20%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%3A%20wget%20https%3A%2F%2Fdl.k8s.io%2Fv1.18.9%2Fkubernetes-client-linux-amd64.tar.gz%0A%20%20%20%20-%20!%5B5484900db087aea1dd71f2fbc275e2a0.png%5D(en-resource%3A%2F%2Fdatabase%2F5221%3A1)%0A%23%23%23%23%23%23%2002.%20%E8%A7%A3%E5%8E%8B%E7%BC%A9%EF%BC%8C%E6%94%BE%E5%85%A5%2Fusr%2Flocal%2Fbin%E7%9B%AE%E5%BD%95%E4%B8%AD%0A%2B%20!%5B83c249497ce45b94604dd74be0135f8c.png%5D(en-resource%3A%2F%2Fdatabase%2F5223%3A1)%0A%23%23%23%20Step4.%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85minikube%0A%23%23%23%23%23%2001.%20%E4%B8%8B%E8%BD%BDminikube%0A%E5%90%8Ckubectl%EF%BC%8C%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F%E7%89%88%E6%9C%AC%E5%8F%B7%0A%2B%20%E7%82%B9%E5%87%BB%E8%BF%9B%E5%85%A5%E4%B8%8B%E8%BD%BD%E9%A1%B5%E9%9D%A2%5Bhttps%3A%2F%2Fgithub.com%2Fkubernetes%2Fminikube%2Freleases%2Ftag%2Fv1.12.3%5D(https%3A%2F%2Fgithub.com%2Fkubernetes%2Fminikube%2Freleases%2Ftag%2Fv1.12.3)%0A%2B%20%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%3A%20wget%20%20https%3A%2F%2Fgithub.com%2Fkubernetes%2Fminikube%2Freleases%2Fdownload%2Fv1.12.3%2Fminikube-linux-amd64%0A%20%20%20%20%20-%20!%5Ba3cbd3db1c070cfb5eff0656b8c2de01.png%5D(en-resource%3A%2F%2Fdatabase%2F5225%3A1)%0A%2B%20%E8%AF%B7%E6%B3%A8%E6%84%8F%EF%BC%8C%E8%BF%99%E9%87%8C%E4%B8%8B%E8%BD%BD%E7%9A%84%E6%98%AFv1.12.3%E7%89%88%E6%9C%AC%E7%9A%84minikube%EF%BC%8C%E5%AF%B9%E5%BA%94%E7%9A%84K8S%E7%89%88%E6%9C%AC%E6%98%AFv1.18.3%0A%23%23%23%23%23%2002.%20%E9%87%8D%E5%91%BD%E5%90%8D%0A%2B%20mv%20minikube-linux-amd64%20minikube%0A%23%23%23%23%23%2003.%20%E8%B5%8B%E4%BA%88%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%9D%83%E9%99%90%0A%2B%20sudo%20chmod%20a%2Bx%20minikube%0A%23%23%23%23%23%2004.%20%E6%94%BE%E5%85%A5%E5%88%B0%2Fusr%2Flocal%2Fbin%E7%9B%AE%E5%BD%95%E4%B8%AD%0A%2B%20sudo%20cp%20minikube%20%2Fusr%2Flocal%2Fbin%2F%0A%23%23%23%20Step5.%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%90%AF%E5%8A%A8K8S%0A%23%23%23%23%23%20001.%E4%BD%BF%E7%94%A8%E5%A6%82%E4%B8%8B%E5%91%BD%E4%BB%A4%E5%88%9B%E5%BB%BAK8S%E9%9B%86%E7%BE%A4%0A%2B%20minikube%20start%20--vm-driver%3Dvirtualbox%20--registry-mirror%3Dhttps%3A%2F%2F17o3zxc0.mirror.aliyuncs.com%0A%20%20%20%20-%20--vm-driver%3A%E6%8C%87%E5%AE%9A%E9%A9%B1%E5%8A%A8%EF%BC%8C%E8%BF%99%E9%87%8C%E4%BD%BF%E7%94%A8Virtual%20Box%E6%9D%A5%E5%AE%9E%E7%8E%B0%0A%20%20%20%20-%20--registry-mirror%C2%A0docker%20registry%20%E7%9A%84%E9%95%9C%E5%83%8F%E6%BA%90%EF%BC%8C%E9%9B%86%E7%BE%A4%E5%AE%89%E8%A3%85%E5%90%8E%E6%8B%89%E5%8F%96%E9%95%9C%E5%83%8F%E5%8A%A0%E9%80%9F%E7%94%A8%EF%BC%8C%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%E5%85%B6%E5%AE%83%E5%8A%A0%E9%80%9F%E5%99%A8%E5%9C%B0%E5%9D%80%0A%20%20%20%20-%20!%5Bccdd9c09346f6ff4f17bad0f37b698e5.png%5D(en-resource%3A%2F%2Fdatabase%2F5235%3A1)%0A%20%20%20%20%0A%23%23%23%23%23%20002.%20%E5%88%A4%E6%96%AD%E6%98%AF%E5%90%A6%E5%88%9B%E5%BB%BA%E6%88%90%E5%8A%9F%0A%2B%20%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%3A%20minikube%20status%0A%20%20%20%20-%20!%5B7daf76329ab237197f6f34bb59b0778d.png%5D(en-resource%3A%2F%2Fdatabase%2F5231%3A1)%0A%20%20%20%20-%20%E5%A6%82%E5%9B%BE%EF%BC%8C%E5%8D%B3%E5%88%9B%E5%BB%BA%E6%88%90%E5%8A%9F%0A%23%23%23%20Step6.%E4%BD%BF%E7%94%A8K8S%E9%9B%86%E7%BE%A4%0A%23%23%23%23%23%20001.%20%E5%88%9B%E5%BB%BAnginx-deployment.yml%E6%96%87%E4%BB%B6%E3%80%82%0A%2B%20%E5%86%85%E5%AE%B9%E5%A6%82%E4%B8%8B%0A%20%20%20%20%60%60%60yml%0A%20%20%20%20apiVersion%3A%20apps%2Fv1%0A%20%20%20%20kind%3A%20Deployment%0A%20%20%20%20metadata%3A%0A%20%20%20%20%20%20name%3A%20nginx-deployment%0A%20%20%20%20spec%3A%0A%20%20%20%20%20%20replicas%3A%201%0A%20%20%20%20%20%20selector%3A%0A%20%20%20%20%20%20%20%20matchLabels%3A%0A%20%20%20%20%20%20%20%20%20%20app%3A%20nginx%0A%20%20%20%20%20%20template%3A%0A%20%20%20%20%20%20%20%20metadata%3A%0A%20%20%20%20%20%20%20%20%20%20labels%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20app%3A%20nginx%0A%20%20%20%20%20%20%20%20spec%3A%0A%20%20%20%20%20%20%20%20%20%20containers%3A%0A%20%20%20%20%20%20%20%20%20%20-%20name%3A%20nginx%0A%20%20%20%20%20%20%20%20%20%20%20%20image%3A%20nginx%0A%20%20%20%20%20%20%20%20%20%20%20%20ports%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20-%20containerPort%3A%2080%0A%20%20%20%20%60%60%60%0A%23%23%23%23%23%20002.%20%E5%88%9B%E5%BB%BAnginx-service.yml%E6%96%87%E4%BB%B6%E3%80%82%0A%2B%20%E5%86%85%E5%AE%B9%E5%A6%82%E4%B8%8B%0A%20%20%20%20%60%60%60yml%0A%20%20%20%20kind%3A%20Service%0A%20%20%20%20apiVersion%3A%20v1%0A%20%20%20%20metadata%3A%0A%20%20%20%20%20%20name%3A%20nginx-service%0A%20%20%20%20spec%3A%0A%20%20%20%20%20%20selector%3A%0A%20%20%20%20%20%20%20%20app%3A%20nginx%0A%20%20%20%20%20%20ports%3A%0A%20%20%20%20%20%20%20%20-%20port%3A%2080%0A%20%20%20%20%20%20%20%20%20%20targetPort%3A%2080%0A%20%20%20%20%60%60%60%0A%23%23%23%23%23%20003.%20%E5%88%9B%E5%BB%BAnginx-ingress.yml%E6%96%87%E4%BB%B6%E3%80%82%0A%2B%20%E5%86%85%E5%AE%B9%E5%A6%82%E4%B8%8B%0A%20%20%20%20%60%60%60yml%0A%20%20%20%20apiVersion%3A%20extensions%2Fv1beta1%0A%20%20%20%20kind%3A%20Ingress%0A%20%20%20%20metadata%3A%0A%20%20%20%20%20%20name%3A%20nginx-ingress%0A%20%20%20%20%20%20annotations%3A%0A%20%20%20%20%20%20%20%20kubernetes.io%2Fingress.class%3A%20%22nginx%22%0A%20%20%20%20spec%3A%0A%20%20%20%20%20%20rules%3A%0A%20%20%20%20%20%20-%20host%3A%20nginx.bosswang.link%0A%20%20%20%20%20%20%20%20http%3A%0A%20%20%20%20%20%20%20%20%20%20paths%3A%0A%20%20%20%20%20%20%20%20%20%20-%20path%3A%20%2F%0A%20%20%20%20%20%20%20%20%20%20%20%20backend%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20serviceName%3A%20nginx-service%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20servicePort%3A%2080%0A%20%20%20%20%60%60%60%0A%23%23%23%23%23%20004.%20%E5%BA%94%E7%94%A8yml%E6%96%87%E4%BB%B6%EF%BC%8C%E5%88%9B%E5%BB%BApod%EF%BC%8Cservice%EF%BC%8Cingress%0A%2B%20%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%3Akubectl%20create%20-f%20nginx-xxx.yml%0A%20%20%20-%20!%5Bf7283060f441f068067c189d3581a5e1.png%5D(en-resource%3A%2F%2Fdatabase%2F5233%3A1)%0A%23%23%23%23%23%20005.%20minikube%20%E5%90%AF%E5%8A%A8ingress%0A%2B%20%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%EF%BC%9Aminikube%20addons%20enable%20ingress%0A%20%20%20-%20!%5B69df062c40855594d7724c2a91aa60d4.png%5D(en-resource%3A%2F%2Fdatabase%2F5237%3A1)%0A%20%20%20-%20%E8%8B%A5%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%85%88%E6%89%A7%E8%A1%8Cminikube%20dashboard%E5%91%BD%E4%BB%A4%0A%20%20%20-%20%E6%88%90%E5%8A%9F%E6%95%88%E6%9E%9C%E5%A6%82%E4%B8%8B%EF%BC%9A%0A%20%20%20%20%20%20-%20!%5B873c53bc4f60845272a070527973d6c2.png%5D(en-resource%3A%2F%2Fdatabase%2F5239%3A1)%0A%23%23%23%23%23%20006.%20%E6%9C%AC%E5%9C%B0%E9%85%8D%E7%BD%AEDNS%EF%BC%8C%E5%88%9B%E5%BB%BA%E8%99%9A%E6%8B%9F%E5%9F%9F%E5%90%8D%0A%2B%20%E4%BF%AE%E6%94%B9%2Fetc%2Fhosts%E6%96%87%E4%BB%B6%EF%BC%8C%E6%B7%BB%E5%8A%A0%E5%A6%82%E4%B8%8B%E5%86%85%E5%AE%B9%0A%20%20%20-%20!%5Ba9155e229c9beea26d5d0ea9725db4c5.png%5D(en-resource%3A%2F%2Fdatabase%2F5241%3A1)%0A%23%23%23%23%23%20007.%20%E8%AE%BF%E9%97%AE%0A%2B%20%E7%9B%AE%E5%89%8D%E5%9C%A8%E8%AF%A5K8S%E9%9B%86%E7%BE%A4%E4%B8%AD%E5%88%9B%E5%BB%BA%E7%9A%84Pod%EF%BC%8CService%EF%BC%8CIngress%EF%BC%8C%E5%9B%A0%E6%AD%A4%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87%E5%A4%96%E7%BD%91%E8%AE%BF%E9%97%AE%E5%88%B0%E9%9B%86%E7%BE%A4%E5%86%85%E9%83%A8(%E9%80%9A%E8%BF%87Ingress%EF%BC%8C%E5%BD%93%E7%84%B6%E4%B9%9F%E5%8F%AF%E4%BB%A5%E7%9B%B4%E6%8E%A5%E4%BD%BF%E7%94%A8NodePort%E5%BD%A2%E5%BC%8F%E8%AE%BF%E9%97%AE%E6%9C%8D%E5%8A%A1)%E7%9A%84%E6%9C%8D%E5%8A%A1%E3%80%82%E5%A6%82%E4%B8%8B%0A%20%20%20%20-%20%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%EF%BC%9A%20curl%20http%3A%2F%2Fnginx.bosswang.link%2C%E8%BE%93%E5%85%A5%E5%A6%82%E4%B8%8B%3A%0A%20%20%20%20%20%20%20%20%2B%20!%5B7281bfd1cdc5dd4359647be290ec713c.png%5D(en-resource%3A%2F%2Fdatabase%2F5243%3A1)%0A%20%20%20%20-%20%E6%B5%8B%E8%AF%95%E4%B8%80%E4%B8%8B%EF%BC%9A%E4%BF%AE%E6%94%B9nginx%E7%9A%84index%E9%A1%B5%E9%9D%A2%0A%20%20%20%20%20%20%20%20%2B%20!%5B09be523024fb5cbdec72d6f239e5ec79.png%5D(en-resource%3A%2F%2Fdatabase%2F5245%3A1)%0A%20%20%20%20%20%20%20%20%2B%20%E5%86%8D%E6%AC%A1%E8%AE%BF%E9%97%AE%EF%BC%9A!%5Bdcbac3a0d371ba0f9ff990c3e0db5f7f.png%5D(en-resource%3A%2F%2Fdatabase%2F5247%3A1)%0A%23%23%20%E6%80%BB%E7%BB%93%0A1.%20%E8%AF%A5%E6%96%87%E6%A1%A3%E4%BB%85%E4%BB%85%E6%98%AF%E4%BD%93%E7%8E%B0%E5%A6%82%E4%BD%95%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%8D%95%E8%8A%82%E7%82%B9%E7%9A%84K8S%E9%9B%86%E7%BE%A4%EF%BC%8C%E6%9B%B4%E5%A4%9A%E6%9B%B4%E6%B7%B1%E5%85%A5%E7%9A%84%EF%BC%8C%E6%9B%B4%E6%9C%89%E8%B6%A3%E7%9A%84%E9%9C%80%E8%A6%81%E4%BD%A0%E6%9D%A5%E6%8E%A2%E7%B4%A2%E3%80%82%0A%0A%0A%0A</center></span>
</div></body></html> 